"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ava_1 = require("ava");
var child_process_1 = require("child_process");
var fs_1 = require("fs");
var expected = "export interface ExampleSchema {\n  firstName: string;\n  lastName: string;\n  /**\n   * Age in years\n   */\n  age?: number;\n  height?: number;\n  favoriteFoods?: any[];\n  likesDogs?: boolean;\n  [k: string]: any;\n}\n";
function run() {
    ava_1.test('pipe in, pipe out', function (t) {
        t.is(child_process_1.execSync('cat ./test/resources/ReferencedType.json | node dist/src/cli.js', { encoding: 'utf-8' }).toString(), expected);
    });
    ava_1.test('file in (no flags), pipe out', function (t) {
        t.is(child_process_1.execSync('node dist/src/cli.js ./test/resources/ReferencedType.json').toString(), expected);
    });
    ava_1.test('file in (--input), pipe out', function (t) {
        t.is(child_process_1.execSync('node dist/src/cli.js --input ./test/resources/ReferencedType.json').toString(), expected);
    });
    ava_1.test('file in (-i), pipe out', function (t) {
        t.is(child_process_1.execSync('node dist/src/cli.js -i ./test/resources/ReferencedType.json').toString(), expected);
    });
    ava_1.test('pipe in, file out (--output)', function (t) {
        child_process_1.execSync('cat ./test/resources/ReferencedType.json | node dist/src/cli.js --output ./ReferencedType.d.ts').toString();
        t.is(fs_1.readFileSync('./ReferencedType.d.ts', 'utf-8'), expected);
        fs_1.unlinkSync('./ReferencedType.d.ts');
    });
    ava_1.test('pipe in, file out (-o)', function (t) {
        child_process_1.execSync('cat ./test/resources/ReferencedType.json | node dist/src/cli.js -o ./ReferencedType.d.ts').toString();
        t.is(fs_1.readFileSync('./ReferencedType.d.ts', 'utf-8'), expected);
        fs_1.unlinkSync('./ReferencedType.d.ts');
    });
    ava_1.test('file in (no flags), file out (no flags)', function (t) {
        child_process_1.execSync('node dist/src/cli.js ./test/resources/ReferencedType.json ./ReferencedType.d.ts').toString();
        t.is(fs_1.readFileSync('./ReferencedType.d.ts', 'utf-8'), expected);
        fs_1.unlinkSync('./ReferencedType.d.ts');
    });
    ava_1.test('file in (-i), file out (-o)', function (t) {
        child_process_1.execSync('node dist/src/cli.js -i ./test/resources/ReferencedType.json -o ./ReferencedType.d.ts').toString();
        t.is(fs_1.readFileSync('./ReferencedType.d.ts', 'utf-8'), expected);
        fs_1.unlinkSync('./ReferencedType.d.ts');
    });
    ava_1.test('file in (--input), file out (--output)', function (t) {
        child_process_1.execSync('node dist/src/cli.js --input ./test/resources/ReferencedType.json --output ./ReferencedType.d.ts').toString();
        t.is(fs_1.readFileSync('./ReferencedType.d.ts', 'utf-8'), expected);
        fs_1.unlinkSync('./ReferencedType.d.ts');
    });
}
exports.run = run;
//# sourceMappingURL=testCLI.js.map